---
sidebar: sidebar 
permalink: task-updating-ontap-cloud.html 
keywords: update, updating, upgrading, upgrade, software, downgrade, downgrading, FTP, HTTP, mediator, local image, revert, reverting, downgrading, cloud backup 
summary: NetApp Console 에서 Cloud Volumes ONTAP 업그레이드하여 최신 새 기능과 향상된 기능을 활용하세요.  소프트웨어를 업그레이드하기 전에 Cloud Volumes ONTAP 시스템을 준비해야 합니다. 
---
= Cloud Volumes ONTAP 소프트웨어 업그레이드
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
NetApp Console 에서 Cloud Volumes ONTAP 업그레이드하여 최신 새 기능과 향상된 기능을 활용하세요.  소프트웨어를 업그레이드하기 전에 Cloud Volumes ONTAP 시스템을 준비해야 합니다.



== 업그레이드 개요

Cloud Volumes ONTAP 업그레이드 프로세스를 시작하기 전에 다음 사항을 알고 있어야 합니다.



=== 콘솔에서만 업그레이드

ONTAP System Manager나 ONTAP CLI를 사용해서는 안 되며, 오직 콘솔을 사용해서만 Cloud Volumes ONTAP 업그레이드해야 합니다.  그렇지 않으면 시스템 안정성에 영향을 미칠 수 있습니다.



=== 업그레이드 방법

콘솔은 Cloud Volumes ONTAP 을 업그레이드하는 두 가지 방법을 제공합니다.

* 시스템에 나타나는 업그레이드 알림을 따르면
* HTTPS 위치에 업그레이드 이미지를 배치한 다음 콘솔에 URL을 제공합니다.




=== 지원되는 업그레이드 경로

업그레이드할 수 있는 Cloud Volumes ONTAP 버전은 현재 실행 중인 Cloud Volumes ONTAP 버전에 따라 달라집니다.

[cols="2*"]
|===
| 현재 버전 | 직접 업그레이드할 수 있는 버전 


| 9.16.1(Azure 및 Google Cloud에만 해당) | 9.17.1(Azure 및 Google Cloud에만 해당) 


| 9.15.1 | 9.16.1(Azure 및 Google Cloud에만 해당) 


| 9.15.0 | 9.15.1 


.2+| 9.14.1 | 9.15.1 


| 9.15.0 


| 9.14.0 | 9.14.1 


.2+| 9.13.1 | 9.14.1 


| 9.14.0 


| 9.13.0 | 9.13.1 


.2+| 9.12.1 | 9.13.1 


| 9.13.0 


| 9.12.0 | 9.12.1 


.2+| 9.11.1 | 9.12.1 


| 9.12.0 


| 9.11.0 | 9.11.1 


.2+| 9.10.1 | 9.11.1 


| 9.11.0 


| 9.10.0 | 9.10.1 


.2+| 9.9.1 | 9.10.1 


| 9.10.0 


| 9.9.0 | 9.9.1 


| 9.8 | 9.9.1 


| 9.7 | 9.8 


| 9.6 | 9.7 


| 9.5 | 9.6 


| 9.4 | 9.5 


| 9.3 | 9.4 


| 9.2 | 9.3 


| 9.1 | 9.2 


| 9.0 | 9.1 


| 8.3 | 9.0 
|===
다음 사항에 유의하세요.

* Cloud Volumes ONTAP 에 지원되는 업그레이드 경로는 온프레미스 ONTAP 클러스터와 다릅니다.
* 시스템에 나타나는 알림에 따라 업그레이드하는 경우, 콘솔에서 지원되는 업그레이드 경로를 따르는 릴리스로 업그레이드하라는 메시지가 표시됩니다.
* HTTPS 위치에 업그레이드 이미지를 배치하여 업그레이드하는 경우, 지원되는 다음 업그레이드 경로를 따라야 합니다.
* 어떤 경우에는 대상 릴리스에 도달하기 위해 여러 번 업그레이드해야 할 수도 있습니다.
+
예를 들어, 버전 9.8을 사용 중이고 9.10.1로 업그레이드하려는 경우 먼저 버전 9.9.1로 업그레이드한 다음 9.10.1로 업그레이드해야 합니다.





=== 패치 릴리스

2024년 1월부터 Cloud Volumes ONTAP 의 최신 버전 3개에 대한 패치 릴리스가 있는 경우에만 패치 업그레이드가 가능합니다.  RC 또는 GA 버전을 배포할 수 없을 때 패치 버전을 배포할 수 있는 경우가 있습니다.

콘솔에 표시할 최신 버전 3개를 결정하기 위해 최신 GA 릴리스를 사용합니다.  예를 들어, 현재 GA 릴리스가 9.13.1이면 9.11.1-9.13.1에 대한 패치가 콘솔에 나타납니다.  버전 9.11.1 이하에 대한 패치 릴리스로 업그레이드하려면 다음 수동 업그레이드 절차를 사용해야 합니다.<<URL에서 사용 가능한 이미지에서 업그레이드,ONTAP 이미지 다운로드>> .

패치(P) 릴리스의 경우 일반적으로 현재 실행 중인 버전의 P 릴리스나 다음 버전으로 업그레이드할 수 있습니다.

다음은 몇 가지 예입니다.

* 9.13.0 > 9.13.1P15
* 9.12.1 > 9.13.1P2




=== 되돌리기 또는 다운그레이드

Cloud Volumes ONTAP 이전 릴리스로 되돌리거나 다운그레이드하는 것은 지원되지 않습니다.



=== 지원 등록

이 페이지에 설명된 방법을 사용하여 소프트웨어를 업그레이드하려면 Cloud Volumes ONTAP NetApp 지원팀에 등록해야 합니다.  이는 종량제(PAYGO)와 자체 라이선스 사용(BYOL) 모두에 적용됩니다.  당신은 필요합니다link:task-registering.html["PAYGO 시스템 수동 등록"] BYOL 시스템은 기본적으로 등록됩니다.


TIP: 지원에 등록되지 않은 시스템도 새 버전이 출시되면 콘솔에 표시되는 소프트웨어 업데이트 알림을 받게 됩니다.  하지만 소프트웨어를 업그레이드하려면 먼저 시스템을 등록해야 합니다.



=== HA 중재자의 업그레이드

콘솔은 Cloud Volumes ONTAP 업그레이드 프로세스 중에 필요에 따라 중재자 인스턴스도 업데이트합니다.



=== c4, m4 및 r4 EC2 인스턴스 유형을 사용한 AWS 업그레이드

Cloud Volumes ONTAP 더 이상 c4, m4, r4 EC2 인스턴스 유형을 지원하지 않습니다.  다음 인스턴스 유형을 사용하면 기존 배포를 Cloud Volumes ONTAP 버전 9.8-9.12.1로 업그레이드할 수 있습니다.  업그레이드하기 전에 다음을 권장합니다.<<인스턴스 유형 변경,인스턴스 유형을 변경합니다>> .  인스턴스 유형을 변경할 수 없는 경우 다음을 수행해야 합니다.<<향상된 네트워킹 활성화,향상된 네트워킹을 활성화하세요>> 업그레이드하기 전에.  인스턴스 유형을 변경하고 향상된 네트워킹을 활성화하는 방법에 대해 자세히 알아보려면 다음 섹션을 읽어보세요.

9.13.0 이상 버전을 실행하는 Cloud Volumes ONTAP 에서는 c4, m4, r4 EC2 인스턴스 유형으로 업그레이드할 수 없습니다.  이 경우에는 디스크 개수를 줄여야 합니다.<<인스턴스 유형 변경,인스턴스 유형을 변경합니다>> 또는 c5, m5, r5 EC2 인스턴스 유형을 사용하여 새로운 HA 쌍 구성을 배포하고 데이터를 마이그레이션합니다.



==== 인스턴스 유형 변경

c4, m4 및 r4 EC2 인스턴스 유형은 c5, m5 및 r5 EC2 인스턴스 유형보다 노드당 더 많은 디스크를 허용합니다.  실행 중인 c4, m4 또는 r4 EC2 인스턴스의 노드당 디스크 수가 c5, m5 및 r5 인스턴스의 노드당 최대 디스크 허용량보다 낮은 경우 EC2 인스턴스 유형을 c5, m5 또는 r5로 변경할 수 있습니다.

link:https://docs.netapp.com/us-en/cloud-volumes-ontap-relnotes/reference-limits-aws.html#disk-and-tiering-limits-by-ec2-instance["EC2 인스턴스별 디스크 및 계층화 제한 확인"^] link:https://docs.netapp.com/us-en/bluexp-cloud-volumes-ontap/task-change-ec2-instance.html["Cloud Volumes ONTAP 의 EC2 인스턴스 유형 변경"^]

인스턴스 유형을 변경할 수 없는 경우 다음 단계를 따르세요.<<향상된 네트워킹 활성화>> .



==== 향상된 네트워킹 활성화

Cloud Volumes ONTAP 버전 9.8 이상으로 업그레이드하려면 c4, m4 또는 r4 인스턴스 유형을 실행하는 클러스터에서 _향상된 네트워킹_을 활성화해야 합니다.  ENA를 활성화하려면 기술 자료 문서를 참조하세요.link:https://kb.netapp.com/Cloud/Cloud_Volumes_ONTAP/How_to_enable_Enhanced_networking_like_SR-IOV_or_ENA_on_AWS_CVO_instances["AWS Cloud Volumes ONTAP 인스턴스에서 SR-IOV 또는 ENA와 같은 향상된 네트워킹을 활성화하는 방법"^] .



== 업그레이드 준비

업그레이드를 수행하기 전에 시스템이 준비되었는지 확인하고 필요한 구성을 변경해야 합니다.

* <<가동 중지 시간을 계획하세요>>
* <<자동 환불이 여전히 활성화되어 있는지 확인하세요.>>
* <<SnapMirror 전송 일시 중단>>
* <<집계가 온라인인지 확인하세요>>
* <<모든 LIF가 홈 포트에 있는지 확인하세요.>>




=== 가동 중지 시간을 계획하세요

단일 노드 시스템을 업그레이드하면 업그레이드 프로세스로 인해 시스템이 최대 25분 동안 오프라인 상태가 되며, 이 기간 동안 I/O가 중단됩니다.

많은 경우 HA 쌍을 업그레이드하는 작업은 중단 없이 진행되며 I/O도 중단되지 않습니다.  이러한 중단 없는 업그레이드 프로세스 동안 각 노드는 클라이언트에 I/O를 계속 제공하기 위해 동시에 업그레이드됩니다.

세션 지향 프로토콜은 업그레이드 중 특정 영역의 클라이언트와 애플리케이션에 부정적인 영향을 미칠 수 있습니다. 자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/ontap/upgrade/concept_considerations_for_session_oriented_protocols.html["ONTAP 문서"^]



=== 자동 환불이 여전히 활성화되어 있는지 확인하세요.

Cloud Volumes ONTAP HA 쌍에서 자동 반환 기능을 활성화해야 합니다(이는 기본 설정입니다).  그렇지 않으면 작업이 실패합니다.

http://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-cm-hacg/GUID-3F50DE15-0D01-49A5-BEFD-D529713EC1FA.html["ONTAP 설명서: 자동 반환 구성을 위한 명령"^]



=== SnapMirror 전송 일시 중단

Cloud Volumes ONTAP 시스템에 활성 SnapMirror 관계가 있는 경우 Cloud Volumes ONTAP 소프트웨어를 업데이트하기 전에 전송을 일시 중단하는 것이 가장 좋습니다.  전송을 일시 중단하면 SnapMirror 오류가 방지됩니다.  대상 시스템에서 전송을 중단해야 합니다.


NOTE: NetApp Backup and Recovery SnapMirror 구현( SnapMirror Cloud라고 함)을 사용하여 백업 파일을 생성하지만, 시스템을 업그레이드할 때 백업을 중단할 필요는 없습니다.

.이 작업에 관하여
이 단계에서는 ONTAP System Manager 9.3 이상을 사용하는 방법을 설명합니다.

.단계
. 대상 시스템에서 시스템 관리자에 로그인합니다.
+
웹 브라우저에서 클러스터 관리 LIF의 IP 주소를 입력하면 System Manager에 로그인할 수 있습니다.  IP 주소는 Cloud Volumes ONTAP 시스템에서 찾을 수 있습니다.

+

NOTE: 콘솔에 액세스하는 컴퓨터는 Cloud Volumes ONTAP 에 네트워크로 연결되어 있어야 합니다.  예를 들어, 클라우드 공급자 네트워크에 있는 점프 호스트에서 콘솔에 로그인해야 할 수도 있습니다.

. *보호 > 관계*를 클릭합니다.
. 관계를 선택하고 *작업 > 정지*를 클릭합니다.




=== 집계가 온라인인지 확인하세요

소프트웨어를 업데이트하기 전에 Cloud Volumes ONTAP 의 집계가 온라인 상태여야 합니다.  대부분의 구성에서 집계는 온라인 상태여야 하지만, 그렇지 않은 경우 온라인으로 전환해야 합니다.

.이 작업에 관하여
이 단계에서는 ONTAP System Manager 9.3 이상을 사용하는 방법을 설명합니다.

.단계
. Cloud Volumes ONTAP 시스템에서 *집계* 탭을 클릭합니다.
. 필요한 집계 타일에서 다음을 클릭합니다.image:icon-action.png[""] 아이콘을 클릭한 다음 *집계 세부 정보 보기*를 선택하세요.
+
image:screenshots_aggregate_details_state.png["스크린샷: 집계에 대한 정보를 볼 때 상태 필드가 표시됩니다."]

. 집계가 오프라인인 경우 ONTAP 시스템 관리자를 사용하여 집계를 온라인으로 전환합니다.
+
.. *저장소 > 집계 및 디스크 > 집계*를 클릭합니다.
.. 집계를 선택한 다음 *추가 작업 > 상태 > 온라인*을 클릭합니다.






=== 모든 LIF가 홈 포트에 있는지 확인하세요.

업그레이드하기 전에 모든 LIF가 홈 포트에 있어야 합니다.  ONTAP 설명서를 참조하세요.link:https://docs.netapp.com/us-en/ontap/upgrade/task_enabling_and_reverting_lifs_to_home_ports_preparing_the_ontap_software_for_the_update.html["모든 LIF가 홈 포트에 있는지 확인하세요"^] .

업그레이드 실패 오류가 발생하면 기술 자료(KB) 문서를 참조하세요.link:https://kb.netapp.com/Cloud/Cloud_Volumes_ONTAP/CVO_upgrade_fails["Cloud Volumes ONTAP 업그레이드 실패"^] .



== Cloud Volumes ONTAP 업그레이드

콘솔은 업그레이드할 수 있는 새로운 버전이 있을 때 알려줍니다.  이 알림에서 업그레이드 프로세스를 시작할 수 있습니다. 자세한 내용은 다음을 참조하세요. <<콘솔 알림에서 업그레이드>> .

외부 URL의 이미지를 사용하여 소프트웨어 업그레이드를 수행하는 또 다른 방법입니다.  이 옵션은 콘솔이 S3 버킷에 액세스하여 소프트웨어를 업그레이드할 수 없거나 패치가 제공된 경우에 유용합니다. 자세한 내용은 다음을 참조하세요. <<URL에서 사용 가능한 이미지에서 업그레이드>> .



=== 콘솔 알림에서 업그레이드

Cloud Volumes ONTAP Cloud Volumes ONTAP ONTAP 작업 환경에 알림을 표시합니다.


NOTE: 알림을 통해 Cloud Volumes ONTAP 업그레이드하려면 NetApp 지원 사이트 계정이 있어야 합니다.

이 알림을 통해 업그레이드 프로세스를 시작할 수 있습니다. 이 알림은 S3 버킷에서 소프트웨어 이미지를 얻고, 이미지를 설치한 다음 시스템을 다시 시작하여 프로세스를 자동화합니다.

.시작하기 전에
볼륨이나 집계 생성과 같은 작업은 Cloud Volumes ONTAP 시스템에서 진행 중이어서는 안 됩니다.

.단계
. 왼쪽 탐색 메뉴에서 *저장소 > 관리*를 선택합니다.
. Cloud Volumes ONTAP 시스템을 선택하세요.
+
새 버전이 출시되면 개요 탭에 알림이 표시됩니다.

+
image:screenshot_overview_upgrade.png["개요 탭 아래에 있는 \"지금 업그레이드!\" 링크를 보여주는 스크린샷입니다."]

. 설치된 Cloud Volumes ONTAP 버전을 업그레이드하려면 *지금 업그레이드!*를 클릭하세요.  기본적으로 업그레이드할 수 있는 최신 호환 버전이 표시됩니다.
+
image:screenshot_upgrade_select_versions.png["업그레이드 Cloud Volumes ONTAP 버전 페이지의 스크린샷입니다."]

+
다른 버전으로 업그레이드하려면 *다른 버전 선택*을 클릭하세요.  시스템에 설치된 버전과 호환되는 최신 Cloud Volumes ONTAP 버전이 나열되어 있습니다.  예를 들어, 시스템에 설치된 버전이 9.12.1P3이고, 다음과 같은 호환 버전을 사용할 수 있습니다.

+
** 9.12.1P4부터 9.12.1P14까지
** 9.13.1 및 9.13.1P1 업그레이드를 위한 기본 버전으로 9.13.1P1이 표시되고, 다른 사용 가능한 버전으로 9.12.1P13, 9.13.1P14, 9.13.1 및 9.13.1P1이 표시됩니다.


. 선택적으로, *모든 버전*을 클릭하여 업그레이드하려는 다른 버전(예: 설치된 버전의 다음 패치)을 입력할 수 있습니다.  현재 Cloud Volumes ONTAP 버전의 호환 업그레이드 경로는 다음을 참조하세요.link:task-updating-ontap-cloud.html#supported-upgrade-paths["지원되는 업그레이드 경로"] .
. *저장*을 클릭한 다음 *적용*을 클릭합니다.image:screenshot_upgrade_other_versions.png["업그레이드 가능한 버전을 표시하는 스크린샷입니다."]
. 업그레이드 Cloud Volumes ONTAP 페이지에서 EULA를 읽은 다음 *EULA를 읽고 승인합니다*를 선택합니다.
. *업그레이드*를 선택하세요.
. 진행 상황을 보려면 Cloud Volumes ONTAP 시스템에서 *감사*를 선택하세요.


.결과
콘솔에서 소프트웨어 업그레이드가 시작됩니다.  소프트웨어 업데이트가 완료되면 시스템에서 작업을 수행할 수 있습니다.

.당신이 완료한 후
SnapMirror 전송을 중단한 경우 시스템 관리자를 사용하여 전송을 재개하세요.



=== URL에서 사용 가능한 이미지에서 업그레이드

Cloud Volumes ONTAP 소프트웨어 이미지를 콘솔 에이전트나 HTTP 서버에 배치한 다음 콘솔에서 소프트웨어 업그레이드를 시작할 수 있습니다.  콘솔이 S3 버킷에 액세스하여 소프트웨어를 업그레이드할 수 없는 경우 이 옵션을 사용할 수 있습니다.

.시작하기 전에
* 볼륨이나 집계 생성과 같은 작업은 Cloud Volumes ONTAP 시스템에서 진행 중이어서는 안 됩니다.
* ONTAP 이미지를 호스팅하기 위해 HTTPS를 사용하는 경우 인증서 누락으로 인해 SSL 인증 문제가 발생하여 업그레이드가 실패할 수 있습니다.  해결 방법은 ONTAP 과 콘솔 간 인증에 사용할 CA 서명 인증서를 생성하고 설치하는 것입니다.
+
NetApp 기술 자료로 이동하여 단계별 지침을 확인하세요.

+
https://kb.netapp.com/Advice_and_Troubleshooting/Cloud_Services/Cloud_Manager/How_to_configure_Cloud_Manager_as_an_HTTPS_server_to_host_upgrade_images["NetApp KB: 업그레이드 이미지를 호스팅하기 위해 콘솔을 HTTPS 서버로 구성하는 방법"^]



.단계
. 선택 사항: Cloud Volumes ONTAP 소프트웨어 이미지를 호스팅할 수 있는 HTTP 서버를 설정합니다.
+
가상 네트워크에 VPN 연결이 있는 경우 Cloud Volumes ONTAP 소프트웨어 이미지를 자체 네트워크의 HTTP 서버에 배치할 수 있습니다.  그렇지 않은 경우 클라우드의 HTTP 서버에 파일을 저장해야 합니다.

. Cloud Volumes ONTAP 에 자체 보안 그룹을 사용하는 경우 아웃바운드 규칙에서 HTTP 연결을 허용하여 Cloud Volumes ONTAP 이 소프트웨어 이미지에 액세스할 수 있는지 확인하세요.
+

NOTE: 미리 정의된 Cloud Volumes ONTAP 보안 그룹은 기본적으로 아웃바운드 HTTP 연결을 허용합니다.

. 소프트웨어 이미지를 얻으세요 https://mysupport.netapp.com/site/products/all/details/cloud-volumes-ontap/downloads-tab["NetApp 지원 사이트"^] .
. 소프트웨어 이미지를 콘솔 에이전트나 파일이 제공될 HTTP 서버의 디렉토리에 복사합니다.
+
두 가지 경로가 있습니다.  올바른 경로는 콘솔 에이전트 버전에 따라 다릅니다.

+
** `/opt/application/netapp/cloudmanager/docker_occm/data/ontap/images/`
** `/opt/application/netapp/cloudmanager/ontap/images/`


. 시스템에서 다음을 클릭합니다.image:icon-action.png[""] 아이콘을 클릭한 다음 * Cloud Volumes ONTAP 업데이트*를 클릭합니다.
. Cloud Volumes ONTAP 버전 업데이트 페이지에서 URL을 입력한 다음 *이미지 변경*을 클릭합니다.
+
위에 표시된 경로의 콘솔 에이전트에 소프트웨어 이미지를 복사한 경우 다음 URL을 입력합니다.

+
\http://<콘솔_에이전트_개인-IP-주소>/ontap/images/<이미지-파일-이름>

+

NOTE: URL에서 *이미지 파일 이름*은 "cot.image.9.13.1P2.tgz" 형식을 따라야 합니다.

. 확인하려면 *계속*을 클릭하세요.


.결과
콘솔에서 소프트웨어 업데이트가 시작됩니다.  소프트웨어 업데이트가 완료되면 시스템에서 작업을 수행할 수 있습니다.

.당신이 완료한 후
SnapMirror 전송을 중단한 경우 시스템 관리자를 사용하여 전송을 재개하세요.

ifdef::gcp[]



== Google Cloud NAT 게이트웨이 사용 시 다운로드 실패 문제 해결

콘솔 에이전트는 Cloud Volumes ONTAP 에 대한 소프트웨어 업데이트를 자동으로 다운로드합니다. 구성에서 Google Cloud NAT 게이트웨이를 사용하는 경우 다운로드가 실패할 수 있습니다. 이 문제는 소프트웨어 이미지가 나누어지는 부분의 수를 제한하면 해결할 수 있습니다.  이 단계를 완료하려면 API를 사용해야 합니다.

.단계
. 다음 JSON을 본문으로 하여 `/occm/`config에 PUT 요청을 제출합니다.


[source]
----
{
  "maxDownloadSessions": 32
}
----
_maxDownloadSessions_의 값은 1이거나 1보다 큰 정수일 수 있습니다. 값이 1이면 다운로드한 이미지는 분할되지 않습니다.

32는 예시 값입니다. 사용해야 하는 값은 NAT 구성과 동시에 가질 수 있는 세션 수에 따라 달라집니다.

https://docs.netapp.com/us-en/bluexp-automation/cm/api_ref_resources.html#occmconfig["/occm/config API 호출에 대해 자세히 알아보세요"^] .

endif::gcp[]
