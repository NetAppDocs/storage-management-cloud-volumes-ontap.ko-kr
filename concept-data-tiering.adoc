---
sidebar: sidebar 
permalink: concept-data-tiering.html 
keywords: storage tiering, tier, tiering, data tiering, s3, s3 tiering, capacity, performance, s3 endpoint, fabric pool, fabricpool, s3 bucket, requirement, vpc endpoint, policy, policies, tiering policies, auto, snapshot only, backup, none, cooling period, volume tiering policies, blob, standard, infrequent access, hot, cool, tiering level, storage tier, storage class 
summary: 콜드 데이터를 저비용 객체 스토리지로 자동 계층화하여 스토리지 비용을 절감하세요. 
---
= AWS, Azure 또는 Google Cloud에서 Cloud Volumes ONTAP 사용한 데이터 계층화에 대해 알아보세요.
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
비활성 데이터를 저비용 객체 스토리지로 자동 계층화하여 스토리지 비용을 절감하세요.  활성 데이터는 고성능 SSD 또는 HDD에 보관되고, 비활성 데이터는 저비용 개체 스토리지에 계층화됩니다.  이를 통해 기본 저장소의 공간을 확보하고 보조 저장소의 크기를 줄일 수 있습니다.

image:diagram_data_tiering.png["이는 핫 데이터가 EBS 스토리지로 이동하고 비활성 데이터가 S3 스토리지로 이동하는 것을 보여주는 개념적 이미지입니다."]

데이터 계층화는 FabricPool 기술을 기반으로 합니다.  Cloud Volumes ONTAP 추가 라이선스 없이 모든 Cloud Volumes ONTAP 클러스터에 대한 데이터 계층화를 제공합니다.  데이터 계층화를 활성화하면 개체 스토리지에 계층화된 데이터에 요금이 부과됩니다.  개체 스토리지 비용에 대한 자세한 내용은 클라우드 제공업체의 설명서를 참조하세요.

ifdef::aws[]



== AWS의 데이터 계층화

AWS에서 데이터 계층화를 활성화하면 Cloud Volumes ONTAP 핫 데이터의 성능 계층으로 EBS를 사용하고 비활성 데이터의 용량 계층으로 AWS S3를 사용합니다.

성능 계층:: 성능 계층은 일반 용도 SSD(gp3 또는 gp2) 또는 프로비저닝된 IOPS SSD(io1)가 될 수 있습니다.
+
--
처리량 최적화 HDD(st1)를 사용하는 경우 개체 스토리지에 데이터를 계층화하는 것은 권장되지 않습니다.

--
용량 계층:: Cloud Volumes ONTAP 시스템은 비활성 데이터를 단일 S3 버킷에 계층화합니다.
+
--
NetApp 콘솔은 각 시스템에 대해 단일 S3 버킷을 생성하고 이를 fabric-pool-_cluster unique identifier_로 명명합니다.  각 볼륨에 대해 다른 S3 버킷이 생성되지 않습니다.

콘솔이 S3 버킷을 생성할 때 다음과 같은 기본 설정을 사용합니다.

* 저장 등급: 표준
* 기본 암호화: 비활성화됨
* 공개 접근 차단: 모든 공개 접근 차단
* 개체 소유권: ACL 활성화됨
* 버킷 버전 관리: 비활성화됨
* 객체 잠금: 비활성화됨


--
스토리지 클래스:: AWS의 계층형 데이터에 대한 기본 스토리지 클래스는 _Standard_입니다.  Standard는 여러 가용성 영역에 저장된 자주 액세스되는 데이터에 이상적입니다.
+
--
비활성 데이터에 액세스할 계획이 없다면 스토리지 클래스를 다음 중 하나로 변경하여 스토리지 비용을 줄일 수 있습니다. _지능형 계층화_, _단일 영역 드물게 액세스_, _표준 드물게 액세스_ 또는 _S3 Glacier 즉시 검색_.  저장 클래스를 변경하면 비활성 데이터는 표준 저장 클래스에서 시작되고 30일 동안 데이터에 액세스하지 않으면 선택한 저장 클래스로 전환됩니다.

데이터에 액세스하는 경우 액세스 비용이 더 높아지므로 스토리지 클래스를 변경하기 전에 이 점을 고려하세요. https://aws.amazon.com/s3/storage-classes["Amazon S3 설명서: Amazon S3 스토리지 클래스에 대해 자세히 알아보세요"^] .

시스템을 생성할 때 저장 클래스를 선택할 수 있으며, 나중에 언제든지 변경할 수 있습니다.  저장 클래스 변경에 대한 지침은 다음을 참조하세요.link:task-tiering.html["비활성 데이터를 저비용 객체 스토리지로 계층화"] .

데이터 계층화를 위한 스토리지 클래스는 볼륨별이 아닌 시스템 전체에 적용됩니다.

--


endif::aws[]

ifdef::azure[]



== Azure의 데이터 계층화

Azure에서 데이터 계층화를 활성화하면 Cloud Volumes ONTAP 핫 데이터에 대한 성능 계층으로 Azure 관리 디스크를 사용하고 비활성 데이터에 대한 용량 계층으로 Azure Blob Storage를 사용합니다.

성능 계층:: 성능 계층은 SSD 또는 HDD가 될 수 있습니다.
용량 계층:: Cloud Volumes ONTAP 시스템은 비활성 데이터를 단일 Blob 컨테이너에 계층화합니다.
+
--
콘솔은 각 Cloud Volumes ONTAP 시스템에 대한 컨테이너가 있는 새로운 스토리지 계정을 생성합니다.  저장 계정의 이름은 무작위입니다.  각 볼륨에 대해 다른 컨테이너가 생성되지 않습니다.

콘솔은 다음 설정으로 저장소 계정을 생성합니다.

* 액세스 계층: 핫
* 성능: 표준
* 중복성: Cloud Volume ONTAP 배포에 따라
+
** 단일 가용성 영역: 로컬 중복 스토리지(LRS)
** 다중 가용성 영역: 영역 중복 스토리지(ZRS)


* 계정: StorageV2(일반 용도 v2)
* REST API 작업에 대한 보안 전송 필요: 활성화됨
* 저장소 계정 키 액세스: 활성화됨
* 최소 TLS 버전: 버전 1.2
* 인프라 암호화: 비활성화됨


--
스토리지 액세스 계층:: Azure의 계층화된 데이터에 대한 기본 저장소 액세스 계층은 _핫_ 계층입니다.  핫 티어는 용량 티어에서 자주 액세스되는 데이터에 이상적입니다.
+
--
용량 계층에서 비활성 데이터에 액세스할 계획이 없다면 비활성 데이터가 최소 30일 동안 보관되는 _쿨_ 스토리지 계층을 선택할 수 있습니다.  최소 90일 동안 비활성 데이터를 저장하는 _콜드_ 계층을 선택할 수도 있습니다.  보관 요구 사항과 비용 고려 사항에 따라 필요에 가장 적합한 계층을 선택할 수 있습니다.  스토리지 계층을 _cool_ 또는 _cold_로 변경하면 비활성 용량 계층 데이터가 쿨 또는 콜드 스토리지 계층으로 직접 이동합니다.  쿨 티어와 콜드 티어는 핫 티어에 비해 보관 비용이 낮지만, 액세스 비용이 더 높으므로 보관 티어를 변경하기 전에 이 점을 고려하세요. 참조하다 https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-storage-tiers["Microsoft Azure 설명서: Azure Blob 저장소 액세스 계층에 대해 자세히 알아보기"^] .

Cloud Volumes ONTAP 시스템을 추가할 때 스토리지 계층을 선택할 수 있으며, 나중에 언제든지 변경할 수 있습니다.  저장 계층 변경에 대한 자세한 내용은 다음을 참조하세요.link:task-tiering.html["비활성 데이터를 저비용 객체 스토리지로 계층화"] .

데이터 계층화를 위한 스토리지 액세스 계층은 볼륨별이 아닌 시스템 전체에 적용됩니다.

--


endif::azure[]

ifdef::gcp[]



== Google Cloud의 데이터 계층화

Google Cloud에서 데이터 계층화를 활성화하면 Cloud Volumes ONTAP 핫 데이터의 성능 계층으로 영구 디스크를 사용하고 비활성 데이터의 용량 계층으로 Google Cloud Storage 버킷을 사용합니다.

성능 계층:: 성능 계층은 SSD 영구 디스크, 균형 영구 디스크 또는 표준 영구 디스크가 될 수 있습니다.
용량 계층:: Cloud Volumes ONTAP 시스템은 비활성 데이터를 단일 Google Cloud Storage 버킷에 계층화합니다.
+
--
콘솔은 각 시스템에 대한 버킷을 생성하고 이를 fabric-pool-_cluster unique identifier_로 명명합니다.  각 볼륨마다 다른 버킷이 생성되지 않습니다.

콘솔에서 버킷을 생성할 때 다음과 같은 기본 설정을 사용합니다.

* 위치 유형: 지역
* 저장 등급: 표준
* 공개 액세스: 객체 ACL에 따름
* 접근 제어: 세분화됨
* 보호: 없음
* 데이터 암호화: Google 관리 키


--
스토리지 클래스:: 계층형 데이터의 기본 저장 클래스는 _표준 저장_ 클래스입니다.  데이터에 자주 접근하지 않는다면 _Nearline Storage_ 또는 _Coldline Storage_로 변경하여 저장 비용을 줄일 수 있습니다.  저장 클래스를 변경하면 이후의 비활성 데이터는 선택한 클래스로 직접 이동됩니다.
+
--

NOTE: 저장 클래스를 변경해도 기존의 비활성 데이터는 기본 저장 클래스를 유지합니다.  기존 비활성 데이터의 저장 클래스를 변경하려면 수동으로 지정해야 합니다.

데이터에 액세스하는 경우 액세스 비용이 더 높아지므로 스토리지 클래스를 변경하기 전에 이 점을 고려하세요.  자세한 내용은 다음을 참조하세요. https://cloud.google.com/storage/docs/storage-classes["Google Cloud 문서: 스토리지 클래스"^] .

시스템을 생성할 때 저장 계층을 선택할 수 있으며, 나중에 언제든지 변경할 수 있습니다.  저장 클래스 변경에 대한 자세한 내용은 다음을 참조하세요.link:task-tiering.html["비활성 데이터를 저비용 객체 스토리지로 계층화"] .

데이터 계층화를 위한 스토리지 클래스는 볼륨별이 아닌 시스템 전체에 적용됩니다.

--


endif::gcp[]



== 데이터 계층화 및 용량 제한

데이터 계층화를 활성화하면 시스템 용량 제한이 동일하게 유지됩니다.  제한은 성능 계층과 용량 계층에 걸쳐 분산됩니다.



== 볼륨 티어링 정책

데이터 계층화를 활성화하려면 볼륨을 생성, 수정 또는 복제할 때 볼륨 계층화 정책을 선택해야 합니다.  각 볼륨마다 다른 정책을 선택할 수 있습니다.

일부 계층화 정책에는 연관된 최소 냉각 기간이 있는데, 이는 볼륨의 사용자 데이터가 "콜드"로 간주되어 용량 계층으로 이동되기 위해 비활성 상태를 유지해야 하는 시간을 설정합니다.  냉각 기간은 데이터가 집계에 기록될 때부터 시작됩니다.


TIP: 최소 냉각 기간과 기본 집계 임계값인 50%를 변경할 수 있습니다(자세한 내용은 아래 참조). http://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-mgng-stor-tier-fp/GUID-AD522711-01F9-4413-A254-929EAE871EBF.html["냉각 기간을 변경하는 방법을 알아보세요"^] 그리고 http://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-mgng-stor-tier-fp/GUID-8FC4BFD5-F258-4AA6-9FCB-663D42D92CAA.html["임계값을 변경하는 방법을 알아보세요"^] .

콘솔을 사용하면 볼륨을 생성하거나 수정할 때 다음 볼륨 계층화 정책 중에서 선택할 수 있습니다.

스냅샷만:: 집계가 용량의 50%에 도달하면 Cloud Volumes ONTAP 활성 파일 시스템과 연결되지 않은 스냅샷 복사본의 콜드 사용자 데이터를 용량 계층으로 계층화합니다.  냉각 기간은 약 2일입니다.
+
--
읽을 경우, 용량 계층의 콜드 데이터 블록이 핫이 되어 성능 계층으로 이동됩니다.

--
모두:: 모든 데이터(메타데이터 제외)는 즉시 콜드 데이터로 표시되고 가능한 한 빨리 개체 스토리지에 계층화됩니다. 볼륨의 새로운 블록이 차가워질 때까지 48시간을 기다릴 필요가 없습니다. 모든 정책이 설정되기 전에 볼륨에 위치한 블록은 차가워지려면 48시간이 필요합니다.
+
--
읽을 경우, 클라우드 계층의 콜드 데이터 블록은 콜드 상태로 유지되며 성능 계층에 다시 기록되지 않습니다. 이 정책은 ONTAP 9.6부터 사용할 수 있습니다.

--
자동:: 집계가 용량의 50%에 도달하면 Cloud Volumes ONTAP 은 볼륨의 콜드 데이터 블록을 용량 계층으로 계층화합니다.  콜드 데이터에는 스냅샷 사본뿐만 아니라 활성 파일 시스템의 콜드 사용자 데이터도 포함됩니다.  냉각 기간은 약 31일입니다.
+
--
이 정책은 Cloud Volumes ONTAP 9.4부터 지원됩니다.

무작위 읽기로 읽는 경우 용량 계층의 콜드 데이터 블록이 핫해지고 성능 계층으로 이동합니다.  인덱스 및 바이러스 백신 검사와 관련된 순차적 읽기로 읽는 경우, 콜드 데이터 블록은 콜드 상태로 유지되고 성능 계층으로 이동하지 않습니다.

--
None:: 볼륨의 데이터를 성능 계층에 보관하여 용량 계층으로 이동되는 것을 방지합니다.


볼륨을 복제할 때 데이터를 개체 스토리지에 계층화할지 여부를 선택할 수 있습니다.  그러면 콘솔은 데이터 보호 볼륨에 *백업* 정책을 적용합니다.  Cloud Volumes ONTAP 9.6부터 *모든* 계층화 정책이 백업 정책을 대체합니다.



=== Cloud Volumes ONTAP 끄면 냉각 기간에 영향을 미칩니다.

데이터 블록은 냉각 스캔을 통해 냉각됩니다.  이 과정에서 사용되지 않은 블록의 블록 온도는 다음으로 낮은 값으로 이동(냉각)됩니다.  기본 냉각 시간은 볼륨 계층화 정책에 따라 달라집니다.

* 자동: 31일
* 스냅샷만: 2일


냉각 스캔이 작동하려면 Cloud Volumes ONTAP 실행 중이어야 합니다.  Cloud Volumes ONTAP 이 꺼져 있으면 냉각도 중지됩니다.  결과적으로 더 오랜 시간 동안 시원함을 느낄 수 있습니다.


TIP: Cloud Volumes ONTAP 끄면 시스템을 다시 시작할 때까지 각 블록의 온도가 유지됩니다.  예를 들어, 시스템을 끌 때 블록의 온도가 5라면, 시스템을 다시 켜도 온도는 여전히 5입니다.



== 데이터 계층화 설정

지침 및 지원되는 구성 목록은 다음을 참조하세요.link:task-tiering.html["비활성 데이터를 저비용 객체 스토리지로 계층화"] .
