---
sidebar: sidebar 
permalink: concept-ha-google-cloud.html 
keywords: high-availability, HA, mediator, concepts, understanding, overview, takeover, giveback, rpo, rto, nondisruptive, ha pairs, node, nodes, synchronous, resync, recovery point objective, recovery time objective, failover, mount, remount, failure, data access, access, ip address, performance, gcp, gcp ha, google cloud ha, ha in google cloud 
summary: Cloud Volumes ONTAP 고가용성 구성은 중단 없는 운영과 내결함성을 제공합니다.  Google Cloud에서는 데이터가 두 노드 간에 동기적으로 미러링됩니다. 
---
= Google Cloud의 Cloud Volumes ONTAP HA 쌍에 대해 알아보세요
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Cloud Volumes ONTAP 고가용성(HA) 구성은 중단 없는 운영과 내결함성을 제공합니다.  Google Cloud에서는 데이터가 두 노드 간에 동기적으로 미러링됩니다.



== HA 구성 요소

Google Cloud의 Cloud Volumes ONTAP HA 구성에는 다음 구성 요소가 포함됩니다.

* 두 개의 Cloud Volumes ONTAP 노드의 데이터가 서로 동기적으로 미러링됩니다.
* 저장소 인수 및 반환 프로세스를 지원하기 위해 노드 간 통신 채널을 제공하는 중재자 인스턴스입니다.
* 1개 구역 또는 3개 구역(권장).
+
3개의 영역을 선택하면 두 노드와 중재자가 별도의 Google Cloud 영역에 위치합니다.

* 4개의 가상 사설 클라우드(VPC).
+
GCP에서는 각 네트워크 인터페이스가 별도의 VPC 네트워크에 있어야 하므로 이 구성에서는 4개의 VPC를 사용합니다.

* Cloud Volumes ONTAP HA 쌍으로 들어오는 트래픽을 관리하는 4개의 Google Cloud 내부 부하 분산 장치(TCP/UDP).


link:reference-networking-gcp.html["네트워킹 요구 사항에 대해 알아보세요"]여기에는 로드 밸런서, VPC, 내부 IP 주소, 서브넷 등에 대한 자세한 내용이 포함됩니다.

다음 개념적 이미지는 Cloud Volumes ONTAP HA 쌍과 해당 구성 요소를 보여줍니다.

image:diagram_gcp_ha.png["Cloud Volumes ONTAP HA 쌍과 그 구성 요소의 개념적 이미지입니다."]



=== 중재인

Google Cloud의 중재자 인스턴스에 대한 주요 세부 정보는 다음과 같습니다.

인스턴스 유형:: e2-micro(이전에 f1-micro 인스턴스가 사용됨)
디스크:: 각각 10GiB인 두 개의 표준 영구 디스크
운영 체제:: 데비안 11
+
--

NOTE: Cloud Volumes ONTAP 9.10.0 및 이전 버전의 경우, Debian 10이 메디에이터에 설치되었습니다.

--
업그레이드:: Cloud Volumes ONTAP 업그레이드하면 NetApp Console 도 필요에 따라 중재자 인스턴스를 업데이트합니다.
인스턴스에 대한 액세스:: Debian의 경우 기본 클라우드 사용자는 `admin`입니다. Google Cloud는 Google Cloud Console 또는 gcloud 명령줄을 통해 SSH 액세스가 요청되면 `admin` 사용자에 대한 인증서를 생성하고 추가합니다.  `sudo`을 지정하여 루트 권한을 얻을 수 있습니다.
제3자 에이전트:: 중재자 인스턴스에서는 타사 에이전트나 VM 확장이 지원되지 않습니다.




== 저장소 인수 및 반환

노드 하나가 다운되더라도 다른 노드는 파트너에게 데이터를 제공하여 지속적인 데이터 서비스를 제공할 수 있습니다.  데이터가 파트너에 동기적으로 미러링되었기 때문에 클라이언트는 파트너 노드에서 동일한 데이터에 액세스할 수 있습니다.

노드가 재부팅된 후 파트너는 저장소를 반환하기 전에 데이터를 다시 동기화해야 합니다.  데이터를 다시 동기화하는 데 걸리는 시간은 노드가 다운된 동안 얼마나 많은 데이터가 변경되었는지에 따라 달라집니다.

저장소 인수, 재동기화 및 반환은 모두 기본적으로 자동으로 수행됩니다. 사용자 작업이 필요하지 않습니다.



== RPO와 RTO

HA 구성은 다음과 같이 데이터의 높은 가용성을 유지합니다.

* 복구 지점 목표(RPO)는 0초입니다.
+
귀하의 데이터는 데이터 손실 없이 거래적으로 일관성을 유지합니다.

* 복구 시간 목표(RTO)는 120초입니다.
+
정전이 발생하더라도 120초 이내에 데이터를 사용할 수 있어야 합니다.





== HA 배포 모델

여러 영역이나 단일 영역에 HA 구성을 배포하면 데이터의 높은 가용성을 보장할 수 있습니다.

여러 구역(권장):: 3개 영역에 걸쳐 HA 구성을 배포하면 영역 내에서 장애가 발생하더라도 지속적인 데이터 가용성이 보장됩니다.  단일 영역을 사용하는 것에 비해 쓰기 성능은 약간 낮지만 최소한입니다.
단일 구역:: 단일 영역에 배포되는 경우 Cloud Volumes ONTAP HA 구성은 확산 배치 정책을 사용합니다.  이 정책은 오류 격리를 위해 별도의 영역을 사용하지 않고도 영역 내의 단일 장애 지점으로부터 HA 구성이 보호되도록 보장합니다.
+
--
이 배포 모델을 사용하면 영역 간에 데이터 유출 요금이 발생하지 않으므로 비용이 절감됩니다.

--




== HA 쌍에서 스토리지가 작동하는 방식

ONTAP 클러스터와 달리 GCP의 Cloud Volumes ONTAP HA 쌍의 스토리지는 노드 간에 공유되지 않습니다.  대신, 데이터는 노드 간에 동기적으로 미러링되므로 장애가 발생하더라도 데이터를 사용할 수 있습니다.



=== 저장 공간 할당

새 볼륨을 생성하고 추가 디스크가 필요한 경우 콘솔은 두 노드에 동일한 수의 디스크를 할당하고 미러링된 집계를 만든 다음 새 볼륨을 생성합니다.  예를 들어, 볼륨에 두 개의 디스크가 필요한 경우 콘솔은 노드당 두 개의 디스크를 할당하여 총 4개의 디스크를 할당합니다.



=== 스토리지 구성

HA 쌍을 액티브-액티브 구성으로 사용할 수 있습니다. 이 경우 두 노드 모두 클라이언트에 데이터를 제공하고, 액티브-패시브 구성으로 사용할 경우 패시브 노드는 액티브 노드의 스토리지를 인수한 경우에만 데이터 요청에 응답합니다.



=== HA 구성에 대한 성능 기대치

Cloud Volumes ONTAP HA 구성은 노드 간에 데이터를 동기적으로 복제하므로 네트워크 대역폭을 소모합니다.  결과적으로 단일 노드 Cloud Volumes ONTAP 구성과 비교했을 때 다음과 같은 성능을 기대할 수 있습니다.

* 단일 노드에서만 데이터를 제공하는 HA 구성의 경우, 읽기 성능은 단일 노드 구성의 읽기 성능과 비슷하지만 쓰기 성능은 낮습니다.
* 두 노드 모두에서 데이터를 제공하는 HA 구성의 경우, 읽기 성능은 단일 노드 구성의 읽기 성능보다 높고, 쓰기 성능은 동일하거나 더 높습니다.


Cloud Volumes ONTAP 성능에 대한 자세한 내용은 다음을 참조하세요.link:concept-performance.html["성능"] .



=== 저장소에 대한 클라이언트 액세스

클라이언트는 볼륨이 있는 노드의 데이터 IP 주소를 사용하여 NFS 및 CIFS 볼륨에 액세스해야 합니다.  NAS 클라이언트가 파트너 노드의 IP 주소를 사용하여 볼륨에 액세스하는 경우 트래픽이 두 노드 사이를 이동하게 되어 성능이 저하됩니다.


TIP: HA 쌍의 노드 간에 볼륨을 이동하는 경우 다른 노드의 IP 주소를 사용하여 볼륨을 다시 마운트해야 합니다.  그렇지 않으면 성능이 저하될 수 있습니다.  클라이언트가 CIFS에 대한 NFSv4 참조 또는 폴더 리디렉션을 지원하는 경우 Cloud Volumes ONTAP 시스템에서 해당 기능을 활성화하여 볼륨을 다시 마운트하지 않아도 됩니다.  자세한 내용은 ONTAP 문서를 참조하세요.

볼륨을 선택하고 *마운트 명령*을 클릭하면 콘솔에서 올바른 IP 주소를 찾을 수 있습니다.

image::screenshot_mount_option.png[400]



=== 관련 링크

* link:reference-networking-gcp.html["네트워킹 요구 사항에 대해 알아보세요"]
* link:task-getting-started-gcp.html["GCP를 시작하는 방법을 알아보세요"]

